{% extends "base.j2.html" %}
{% block main %}
<main>  
  <div class="container">

    <section class="text-center" style="color: var(--color-primary)">
      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        viewBox="0 0 128 128" style="enable-background:new 0 0 128 128; max-width: 150px;" xml:space="preserve">
        <circle style="fill:currentColor;" cx="64" cy="64" r="61"/>
        <path style="fill:#FFFFFF;" d="M64,6c32,0,58,26,58,58s-26,58-58,58S6,96,6,64S32,6,64,6 M64,0C28.7,0,0,28.7,0,64s28.7,64,64,64
          s64-28.7,64-64S99.3,0,64,0L64,0z"/>
        <g>
          <path style="fill:#FFFFFF;" d="M38.7,78.3c-0.6,0-1.1-0.2-1.5-0.6c-0.3-0.4-0.5-1-0.5-1.7c0-1.7,0.2-3.4,0.6-4.9
            c0.4-1.5,1.1-3,2-4.6c1-1.6,2.2-3.3,3.7-5.1c1.2-1.5,2.3-2.8,2.9-3.9c0.8-1.1,1.3-2.3,1.6-3.3S48,52,48,51c0-2.1-0.8-3.7-2.3-4.9
            s-3.6-1.8-6.2-1.8c-2.3,0-4.3,0.3-6.2,1c-1.9,0.7-3.7,1.6-5.6,3c-0.8,0.5-1.4,0.8-2,0.8s-1.1-0.2-1.5-0.5s-0.7-0.8-0.8-1.3
            c-0.1-0.5-0.1-1.1,0.3-1.7c0.3-0.6,0.8-1.1,1.5-1.6c1.9-1.6,4.2-2.8,6.9-3.6c2.6-0.9,5.3-1.3,7.9-1.3c2.8,0,5.3,0.5,7.5,1.5
            s3.8,2.3,5,4.1c1.2,1.7,1.7,3.8,1.7,6.2c0,1.6-0.3,3-0.7,4.4s-1.1,2.9-2.1,4.3c-1,1.5-2.3,3-4.1,4.9c-1.6,1.6-2.8,3-3.7,4.4
            c-1,1.4-1.6,2.7-2.1,3.9c-0.4,1.3-0.8,2.6-1,4c-0.1,0.6-0.3,1-0.6,1.5C39.8,78.2,39.3,78.3,38.7,78.3z M38.7,92
            c-1.2,0-2.3-0.3-3-1.1c-0.8-0.8-1.1-1.7-1.1-2.9c0-1.2,0.3-2.2,1.1-2.9c0.8-0.8,1.7-1.1,3-1.1c1.2,0,2.2,0.3,2.9,1.1
            c0.7,0.8,1,1.7,1,2.9c0,1.2-0.3,2.2-1,2.9C40.9,91.6,39.9,92,38.7,92z"/>
          <path style="fill:#FFFFFF;" d="M64.5,92c-1.2,0-2.3-0.3-2.9-1.1c-0.8-0.8-1.1-1.7-1.1-2.9c0-1.2,0.3-2.2,1.1-2.9
            c0.8-0.8,1.7-1.1,2.9-1.1c1.2,0,2.2,0.3,2.9,1.1c0.7,0.8,1,1.7,1,2.9c0,1.2-0.3,2.2-1,2.9C66.8,91.6,65.8,92,64.5,92z M64.5,78.4
            c-0.6,0-1-0.2-1.5-0.6c-0.3-0.4-0.6-1-0.6-1.7L61,42.9c-0.1-1.2,0.3-2.2,0.9-2.9c0.6-0.7,1.5-1,2.7-1c1.1,0,2,0.3,2.6,1
            s0.9,1.6,0.8,2.9L66.5,76c0,0.8-0.2,1.4-0.5,1.7C65.6,78.2,65.1,78.4,64.5,78.4z"/>
          <path style="fill:#FFFFFF;" d="M87.8,78.3c-0.6,0-1.1-0.2-1.5-0.6c-0.3-0.4-0.5-1-0.5-1.7c0-1.7,0.2-3.4,0.6-4.9s1.1-3,2-4.6
            c1-1.6,2.2-3.3,3.7-5.1c1.2-1.5,2.3-2.8,2.9-3.9c0.8-1.1,1.3-2.3,1.6-3.3c0.3-1,0.5-2.2,0.5-3.2c0-2.1-0.8-3.7-2.3-4.9
            s-3.6-1.8-6.2-1.8c-2.3,0-4.3,0.3-6.2,1c-1.9,0.7-3.7,1.6-5.6,3c-0.8,0.5-1.4,0.8-2,0.8s-1.1-0.2-1.5-0.5s-0.7-0.8-0.8-1.3
            c-0.1-0.5-0.1-1.1,0.3-1.7c0.3-0.6,0.8-1.1,1.5-1.6c1.9-1.6,4.2-2.8,6.9-3.6c2.6-0.9,5.3-1.3,7.9-1.3c2.8,0,5.3,0.5,7.5,1.5
            s3.8,2.3,5,4.1c1.2,1.7,1.7,3.8,1.7,6.2c0,1.6-0.3,3-0.7,4.4c-0.4,1.4-1.1,2.9-2.1,4.3c-1,1.5-2.3,3-4.1,4.9
            c-1.6,1.6-2.8,3-3.7,4.4c-1,1.4-1.6,2.7-2.1,3.9c-0.4,1.3-0.8,2.6-1,4c-0.1,0.6-0.3,1-0.6,1.5C88.8,78.2,88.4,78.3,87.8,78.3z
            M87.7,92c-1.2,0-2.3-0.3-3-1.1c-0.8-0.8-1.1-1.7-1.1-2.9c0-1.2,0.3-2.2,1.1-2.9c0.8-0.8,1.7-1.1,3-1.1c1.2,0,2.2,0.3,2.9,1.1
            c0.7,0.8,1,1.7,1,2.9c0,1.2-0.3,2.2-1,2.9C90,91.6,89,92,87.7,92z"/>
        </g>
      </svg>
    </section>

    <section class="hide-not-on-phone">
      <div id="qr-reader" class="is-full-width"></div>
      <button id="scanning-control" type="button" class="button primary outline is-full-width">Scan QR Code</button>
      <script>
        const html5QrCode = new Html5Qrcode("qr-reader");
        const qrCodeSuccessCallback = (decodedText, decodedResult) => {
          if (decodedText.startsWith("{{SITE.BASE_URL}}{{SITE.PATH_PREFIX}}")) { window.location = decodedText }
        };
        const config = { fps: 5, qrbox: { width: 250, height: 250 }, aspectRatio: 1.0, formatsToSupport: [ Html5QrcodeSupportedFormats.QR_CODE ] };
        $('#scanning-control').click(function(){
          if ($(this).text()=="Scan QR Code"){
            html5QrCode.start({ facingMode: "environment" }, config, qrCodeSuccessCallback);            
            $("#logo").hide();
            $(this).text("Stop Camera");
          } else {
            html5QrCode.stop().then((ignore) => {
              $("#logo").show();
              $(this).text("Scan QR Code")
            }).catch((err) => { // Stop failed, handle it.
            });
          }
        })
      </script>
    </section>

    <section>
      <button class="button primary outline is-full-width" onclick="location.href='{{url_for('search')}}'">Text Search for Items/Locations</button>
    </section>

    <section>
      <button class="button primary outline is-full-width" onclick="location.href='{{url_for('list_locs')}}'">List all Locations</button>
    </section>
   
    <section>
      <button class="button primary outline is-full-width" onclick="location.href='{{url_for('create')}}'">Setup a New Location</button>
    </section>

    <section>
      <button class="button primary outline is-full-width" onclick="location.href='{{url_for('print_batch')}}'">Print QR Labels (Multiple)</button>
    </section>

    {% if username != "" %}
    <section>
      <p class="top-margin-05 bottom-margin-05 text-center">Currently logged in as <strong>{{username}}</strong>.</p>
      <p><button class="button primary outline is-full-width" disabled>User Settings</button></p>
      <p><button id="logout-button" class="button outline error is-full-width">Logout</button></p>
      <script>
        $("#logout-button").click(function(){
          if ($(this).text() == "Confirm Logout?"){ location.href='{{url_for('logout')}}' }
          if ($(this).text() == "Logout"){ $(this).text("Confirm Logout?"); setTimeout(function(){ $('#logout-button').text("Logout");}, 2000) }      
        })
      </script>
    </section>

    {% endif %}
    
</main>
{% endblock %}
